<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Vehicle Entry - Admin Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --gray: #95a5a6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .form-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 400px;
            overflow: hidden;
            position: relative;
        }

        .form-toggle {
            display: flex;
            background: var(--primary);
        }

        .toggle-btn {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-btn.active {
            background: var(--secondary);
            color: white;
        }

        .form-box {
            padding: 30px;
        }

        .form {
            display: none;
        }

        .form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form h2 {
            text-align: center;
            margin-bottom: 25px;
            color: var(--dark);
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .input-group i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .input-group input:focus, .input-group select:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            cursor: pointer;
        }

        .remember-forgot {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        .remember-forgot label {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--dark);
        }

        .remember-forgot a {
            color: var(--secondary);
            text-decoration: none;
        }

        .remember-forgot a:hover {
            text-decoration: underline;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #2980b9;
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
            color: var(--gray);
        }

        .form-footer a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 600;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }

        .message {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
            display: none;
        }

        .message.success {
            background: rgba(46, 204, 113, 0.2);
            color: var(--success);
            display: block;
        }

        .message.error {
            background: rgba(231, 76, 60, 0.2);
            color: var(--danger);
            display: block;
        }

        /* Dashboard Styles */
        .dashboard-container {
            display: none;
            width: 100%;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .dashboard-header {
            background: var(--primary);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dashboard-header h1 {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--secondary);
        }

        .logout-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: #c0392b;
        }

        /* Dashboard Layout */
        .dashboard-layout {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 250px;
            background: var(--light);
            padding: 20px 0;
        }

        .sidebar-nav ul {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 5px;
        }

        .sidebar-nav a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px 20px;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .sidebar-nav a:hover, .sidebar-nav a.active {
            background: rgba(52, 152, 219, 0.1);
            color: var(--secondary);
            border-left: 4px solid var(--secondary);
        }

        .sidebar-nav i {
            width: 20px;
            text-align: center;
        }

        .dashboard-content {
            flex: 1;
            padding: 30px;
            background: #f8f9fa;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-header h2 {
            color: var(--dark);
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--secondary);
        }

        .stat-card h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .stat-card p {
            color: var(--gray);
        }

        /* User Management Styles */
        .user-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-group label {
            font-weight: 600;
            color: var(--dark);
        }

        .filter-group select, .filter-group input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 300px;
        }

        .search-box input {
            width: 100%;
            padding: 8px 15px 8px 35px;
        }

        .search-box i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .users-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--primary);
            color: white;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status.active {
            background: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }

        .status.inactive {
            background: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }

        .status.pending {
            background: rgba(243, 156, 18, 0.2);
            color: var(--warning);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .btn-action {
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .btn-edit {
            background: rgba(52, 152, 219, 0.2);
            color: var(--secondary);
        }

        .btn-delete {
            background: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }

        .btn-view {
            background: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }

        .btn-action:hover {
            opacity: 0.8;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .form-container {
                max-width: 100%;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .dashboard-layout {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
            }

            .user-filters {
                flex-direction: column;
            }

            .search-box {
                max-width: 100%;
            }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 0;
            border: 1px solid #888;
            width: 90%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            padding: 15px 20px;
            background: var(--primary);
            color: white;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.5rem;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover,
        .close:focus {
            color: white;
        }

        .modal-body {
            padding: 15px;
        }

        .modal-footer {
            padding: 15px 20px;
            background: #f8f9fa;
            border-radius: 0 0 10px 10px;
            text-align: right;
        }

        .user-details, .vehicle-details {
            margin-bottom: 20px;
        }

        .user-details h4, .vehicle-details h4 {
            margin-bottom: 10px;
            color: var(--dark);
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }

        .user-details p {
            margin: 8px 0;
            line-height: 1.5;
        }

        .vehicle-details p {
            margin: 5px 0;
        }

        .vehicle-details hr {
            border: none;
            border-top: 1px solid #eee;
            margin: 10px 0;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-group input:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .btn-secondary {
            background: var(--gray);
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        /* Charts and Analytics Styles */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .chart-container h3 {
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 1.2rem;
        }

        .chart-container canvas {
            max-width: 100%;
            height: 250px;
        }

        /* Settings Tabs Styles */
        .settings-tabs {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        .tab-buttons {
            display: flex;
            background: var(--light);
            border-bottom: 1px solid #eee;
        }

        .tab-btn {
            flex: 1;
            padding: 15px 20px;
            background: transparent;
            border: none;
            color: var(--gray);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-btn:hover {
            background: rgba(52, 152, 219, 0.1);
            color: var(--secondary);
        }

        .tab-btn.active {
            background: white;
            color: var(--secondary);
            border-bottom-color: var(--secondary);
        }

        .tab-content {
            padding: 30px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .tab-pane h3 {
            margin-bottom: 20px;
            color: var(--dark);
            border-bottom: 2px solid var(--light);
            padding-bottom: 10px;
        }

        .tab-pane .form-group {
            margin-bottom: 20px;
        }

        .tab-pane .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .tab-pane .form-group input,
        .tab-pane .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .tab-pane .form-group input:focus,
        .tab-pane .form-group select:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .tab-pane .form-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

        .tab-pane .form-group label:has(input[type="checkbox"]) {
            display: flex;
            align-items: center;
            font-weight: normal;
        }

        .tab-pane button {
            margin-top: 10px;
        }

        /* Export Buttons */
        .export-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .export-buttons .btn {
            padding: 8px 15px;
            font-size: 0.9rem;
        }

        /* Responsive Charts and Tabs */
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .chart-container canvas {
                height: 200px;
            }

            .tab-buttons {
                flex-direction: column;
            }

            .tab-btn {
                text-align: left;
                border-bottom: none;
                border-left: 3px solid transparent;
            }

            .tab-btn.active {
                border-bottom: none;
                border-left-color: var(--secondary);
            }

            .tab-content {
                padding: 20px;
            }
        }

        /* Responsive Modals */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                margin: 10% auto;
            }

            .modal-header h3 {
                font-size: 1.3rem;
            }

            .modal-body {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-car-side"></i> Smart Vehicle Entry System</h1>
            <p>Admin Portal - User & Vehicle Management</p>
        </div>

        <!-- Login Form Container -->
        <div class="form-container" id="authContainer">
            <div class="form-box">
                <div class="message" id="loginMessage"></div>

                <form class="form active" id="loginForm">
                    <h2>Admin Login</h2>

                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="loginUsername" placeholder="Username" required>
                    </div>

                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPassword" placeholder="Password" required>
                        <i class="fas fa-eye password-toggle" id="loginPasswordToggle"></i>
                    </div>

                    <div class="remember-forgot">
                        <a href="#" id="forgotPassword">Forgot Password?</a>
                    </div>

                    <button type="submit" class="btn">Login</button>
                </form>
            </div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard-container" id="dashboard">
            <div class="dashboard-header">
                <h1><i class="fas fa-car-side"></i> Vehicle Entry System Dashboard</h1>
                <div class="user-info">
                    <img src="https://ui-avatars.com/api/?name=Admin+User&background=3498db&color=fff" alt="Admin">
                    <span>Welcome, <span id="adminName">Admin</span></span>
                    <a href="index.html" class="btn btn-secondary"><i class="fas fa-home"></i> User Portal</a>
                    <button class="logout-btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
            </div>
            
            <div class="dashboard-layout">
                <!-- Sidebar Navigation -->
                <aside class="sidebar">
                    <nav class="sidebar-nav">
                        <ul>
                            <li><a href="#" class="nav-link active" data-section="dashboard-section"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                            <li><a href="#" class="nav-link" data-section="users-section"><i class="fas fa-users"></i> User Management</a></li>
                            <li><a href="#" class="nav-link" data-section="vehicles-section"><i class="fas fa-car"></i> Vehicle Management</a></li>
                        </ul>
                    </nav>
                </aside>
                
                <!-- Main Content Area -->
                <main class="dashboard-content">
                    <!-- Dashboard Section -->
                    <section id="dashboard-section" class="content-section active">
                        <div class="section-header">
                            <h2>System Overview</h2>
                            <p>Manage vehicle access, monitor entries, and control gate operations</p>
                        </div>
                        
                        <div class="stats-cards">
                            <div class="stat-card">
                                <i class="fas fa-users"></i>
                                <h3 id="totalUsers">0</h3>
                                <p>Total Users</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-car"></i>
                                <h3 id="totalVehicles">0</h3>
                                <p>Registered Vehicles</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-sign-in-alt"></i>
                                <h3 id="todayEntries">0</h3>
                                <p>Today's Entries</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-clock"></i>
                                <h3 id="pendingApprovals">0</h3>
                                <p>Pending Approvals</p>
                            </div>
                        </div>
                        
                        <div class="recent-activity">
                            <div class="section-header">
                                <h3>Recent User Registrations</h3>
                                <button class="btn btn-view" id="viewAllUsers">View All</button>
                            </div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Vehicle</th>
                                            <th>Registration Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recentUsersTable">
                                        <!-- Recent users will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>
                    
                    <!-- User Management Section -->
                    <section id="users-section" class="content-section">
                        <div class="section-header">
                            <h2>User Management</h2>
                            <button class="btn" id="addUserBtn"><i class="fas fa-plus"></i> Add New User</button>
                        </div>
                        
                        <div class="user-filters">
                            <div class="filter-group">
                                <label>Status:</label>
                                <select id="statusFilter">
                                    <option value="all">All Users</option>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                    <option value="pending">Pending</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label>User Type:</label>
                                <select id="typeFilter">
                                    <option value="all">All Types</option>
                                    <option value="resident">Resident</option>
                                    <option value="visitor">Visitor</option>
                                    <option value="staff">Staff</option>
                                    <option value="vendor">Vendor</option>
                                </select>
                            </div>
                            
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="userSearch" placeholder="Search users...">
                            </div>
                        </div>
                        
                        <div class="users-table">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Full Name</th>
                                            <th>Email</th>
                                            <th>Phone</th>
                                            <th>Vehicle</th>
                                            <th>User Type</th>
                                            <th>Registration Date</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTable">
                                        <!-- Users will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Vehicle Management Section -->
                    <section id="vehicles-section" class="content-section">
                        <div class="section-header">
                            <h2>Vehicle Management</h2>
                            <button class="btn" id="addVehicleBtn"><i class="fas fa-plus"></i> Add New Vehicle</button>
                        </div>

                        <div class="user-filters">
                            <div class="filter-group">
                                <label>Status:</label>
                                <select id="vehicleStatusFilter">
                                    <option value="all">All Vehicles</option>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                            </div>

                            <div class="filter-group">
                                <label>Make:</label>
                                <select id="vehicleMakeFilter">
                                    <option value="all">All Makes</option>
                                    <option value="Toyota">Toyota</option>
                                    <option value="Honda">Honda</option>
                                    <option value="Ford">Ford</option>
                                    <option value="Nissan">Nissan</option>
                                    <option value="Chevrolet">Chevrolet</option>
                                </select>
                            </div>

                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="vehicleSearch" placeholder="Search vehicles...">
                            </div>
                        </div>

                        <div class="users-table">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>License Plate</th>
                                            <th>Make</th>
                                            <th>Model</th>
                                            <th>Year</th>
                                            <th>Color</th>
                                            <th>Owner</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="vehiclesTable">
                                        <!-- Vehicles will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>



                </main>
            </div>
        </div>

        <!-- Modals -->
        <div id="viewModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>User Details</h3>
                    <span class="close" id="viewModalClose">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="user-details">
                        <h4>User Information</h4>
                        <p><strong>Name:</strong> <span id="viewName"></span></p>
                        <p><strong>Email:</strong> <span id="viewEmail"></span></p>
                        <p><strong>Phone:</strong> <span id="viewPhone"></span></p>
                        <p><strong>User Type:</strong> <span id="viewUserType"></span></p>
                        <p><strong>Status:</strong> <span id="viewStatus"></span></p>
                        <p><strong>Registration Date:</strong> <span id="viewRegDate"></span></p>
                    </div>
                    <div class="vehicle-details">
                        <h4>Vehicle Information</h4>
                        <div id="viewVehicles">
                            <!-- Vehicles will be listed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="editModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Edit User</h3>
                    <span class="close" id="editModalClose">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="editUserForm">
                        <div class="form-group">
                            <label for="editFirstName">First Name</label>
                            <input type="text" id="editFirstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="editLastName">Last Name</label>
                            <input type="text" id="editLastName" name="lastName" required>
                        </div>
                        <div class="form-group">
                            <label for="editEmail">Email</label>
                            <input type="email" id="editEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="editContact">Contact</label>
                            <input type="text" id="editContact" name="contact">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="editCancel">Cancel</button>
                            <button type="submit" class="btn btn-primary">Update User</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Add Vehicle Modal -->
        <div id="addVehicleModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add New Vehicle</h3>
                    <span class="close" id="addVehicleModalClose">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="addVehicleForm">
                        <div class="form-group">
                            <label for="addLicensePlate">License Plate</label>
                            <input type="text" id="addLicensePlate" name="licensePlate" required>
                        </div>
                        <div class="form-group">
                            <label for="addMake">Make</label>
                            <select id="addMake" name="make" required>
                                <option value="">Select Make</option>
                                <option value="Toyota">Toyota</option>
                                <option value="Honda">Honda</option>
                                <option value="Ford">Ford</option>
                                <option value="Nissan">Nissan</option>
                                <option value="Chevrolet">Chevrolet</option>
                                <option value="BMW">BMW</option>
                                <option value="Mercedes">Mercedes</option>
                                <option value="Audi">Audi</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="addModel">Model</label>
                            <input type="text" id="addModel" name="model" required>
                        </div>
                        <div class="form-group">
                            <label for="addYear">Year</label>
                            <input type="number" id="addYear" name="year" min="1900" max="2024" required>
                        </div>
                        <div class="form-group">
                            <label for="addColor">Color</label>
                            <input type="text" id="addColor" name="color">
                        </div>
                        <div class="form-group">
                            <label for="addUserId">Owner (User ID)</label>
                            <input type="text" id="addUserId" name="userId" placeholder="Enter User ID" required>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="addVehicleCancel">Cancel</button>
                            <button type="submit" class="btn">Add Vehicle</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Edit Vehicle Modal -->
        <div id="editVehicleModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Edit Vehicle</h3>
                    <span class="close" id="editVehicleModalClose">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="editVehicleForm">
                        <div class="form-group">
                            <label for="editLicensePlate">License Plate</label>
                            <input type="text" id="editLicensePlate" name="licensePlate" required>
                        </div>
                        <div class="form-group">
                            <label for="editMake">Make</label>
                            <select id="editMake" name="make" required>
                                <option value="">Select Make</option>
                                <option value="Toyota">Toyota</option>
                                <option value="Honda">Honda</option>
                                <option value="Ford">Ford</option>
                                <option value="Nissan">Nissan</option>
                                <option value="Chevrolet">Chevrolet</option>
                                <option value="BMW">BMW</option>
                                <option value="Mercedes">Mercedes</option>
                                <option value="Audi">Audi</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editModel">Model</label>
                            <input type="text" id="editModel" name="model" required>
                        </div>
                        <div class="form-group">
                            <label for="editYear">Year</label>
                            <input type="number" id="editYear" name="year" min="1900" max="2024" required>
                        </div>
                        <div class="form-group">
                            <label for="editColor">Color</label>
                            <input type="text" id="editColor" name="color">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="editVehicleCancel">Cancel</button>
                            <button type="submit" class="btn">Update Vehicle</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>System Settings</h3>
                    <span class="close" id="settingsModalClose">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="settingsForm">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="emailNotifications" checked>
                                Email Notifications for Access Events
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="smsNotifications">
                                SMS Notifications for Security Alerts
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="autoBackup" checked>
                                Automatic Daily Backup
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="sessionTimeout">Session Timeout (minutes)</label>
                            <input type="number" id="sessionTimeout" value="30" min="5" max="120">
                        </div>
                        <div class="form-group">
                            <label for="maxLoginAttempts">Max Login Attempts</label>
                            <input type="number" id="maxLoginAttempts" value="5" min="3" max="10">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="twoFactorAuth">
                                Enable Two-Factor Authentication
                            </label>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="settingsCancel">Cancel</button>
                            <button type="submit" class="btn">Save Settings</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const loginForm = document.getElementById('loginForm');
            const authContainer = document.getElementById('authContainer');
            const dashboard = document.getElementById('dashboard');
            const logoutBtn = document.getElementById('logoutBtn');
            const loginMessage = document.getElementById('loginMessage');
            const adminName = document.getElementById('adminName');
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            const viewAllUsers = document.getElementById('viewAllUsers');
            const addUserBtn = document.getElementById('addUserBtn');
            const statusFilter = document.getElementById('statusFilter');
            const typeFilter = document.getElementById('typeFilter');
            const userSearch = document.getElementById('userSearch');
            const usersTable = document.getElementById('usersTable');
            const recentUsersTable = document.getElementById('recentUsersTable');
            const totalUsers = document.getElementById('totalUsers');
            const totalVehicles = document.getElementById('totalVehicles');
            const todayEntries = document.getElementById('todayEntries');
            const pendingApprovals = document.getElementById('pendingApprovals');

            // Vehicle management elements
            const addVehicleBtn = document.getElementById('addVehicleBtn');
            const vehicleStatusFilter = document.getElementById('vehicleStatusFilter');
            const vehicleMakeFilter = document.getElementById('vehicleMakeFilter');
            const vehicleSearch = document.getElementById('vehicleSearch');
            const vehiclesTable = document.getElementById('vehiclesTable');

            // Modal elements
            const viewModal = document.getElementById('viewModal');
            const editModal = document.getElementById('editModal');
            const viewModalClose = document.getElementById('viewModalClose');
            const editModalClose = document.getElementById('editModalClose');
            const editUserForm = document.getElementById('editUserForm');
            const editCancel = document.getElementById('editCancel');

            // Password toggle elements
            const loginPasswordToggle = document.getElementById('loginPasswordToggle');

            // Modal close functionality
            viewModalClose.addEventListener('click', () => {
                viewModal.style.display = 'none';
            });

            editModalClose.addEventListener('click', () => {
                editModal.style.display = 'none';
            });

            editCancel.addEventListener('click', () => {
                editModal.style.display = 'none';
            });

            // Close modals when clicking outside
            window.addEventListener('click', (event) => {
                if (event.target === viewModal) {
                    viewModal.style.display = 'none';
                }
                if (event.target === editModal) {
                    editModal.style.display = 'none';
                }
            });

            // Edit form submission
            editUserForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const userId = editUserForm.dataset.userId;
                const formData = new FormData(editUserForm);
                const updateData = Object.fromEntries(formData);

                try {
                    const response = await fetch(`http://localhost:50001/api/admin/users/${userId}`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(updateData),
                    });

                    if (response.ok) {
                        editModal.style.display = 'none';
                        loadUsersTable();
                        loadRecentUsers();
                        updateDashboardStats();
                    } else {
                        const errorData = await response.json();
                        alert('Error updating user: ' + (errorData.message || 'Unknown error'));
                    }
                } catch (error) {
                    console.error('Error updating user:', error);
                    alert('Error updating user. Please try again.');
                }
            });

            // Initialize sample data
            initializeSampleData();

            // Password visibility toggle
            function setupPasswordToggle(toggleElement, passwordField) {
                toggleElement.addEventListener('click', function() {
                    const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordField.setAttribute('type', type);
                    toggleElement.classList.toggle('fa-eye');
                    toggleElement.classList.toggle('fa-eye-slash');
                });
            }

            setupPasswordToggle(loginPasswordToggle, document.getElementById('loginPassword'));
            
            // Login form submission
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;

                // Simple validation
                if (!username || !password) {
                    showMessage('Please fill in all fields', 'error');
                    return;
                }

                if (username === "admin" && password === "admin123") {
                    showMessage('Login successful! Redirecting...', 'success');

                    // Store user session
                    sessionStorage.setItem('adminLoggedIn', 'true');
                    sessionStorage.setItem('adminUsername', username);

                    // Show dashboard after a short delay
                    setTimeout(function() {
                        authContainer.style.display = 'none';
                        dashboard.style.display = 'block';
                        adminName.textContent = username;
                        updateDashboardStats();
                        loadUsersTable();
                        loadRecentUsers();
                    }, 1500);
                } else {
                    showMessage('Invalid credentials', 'error');
                }
            });
            
            // Logout functionality
            logoutBtn.addEventListener('click', function() {
                sessionStorage.removeItem('adminLoggedIn');
                sessionStorage.removeItem('adminUsername');
                dashboard.style.display = 'none';
                authContainer.style.display = 'block';
                loginForm.reset();
            });
            

            
            // View all users button
            viewAllUsers.addEventListener('click', function() {
                navLinks.forEach(nav => nav.classList.remove('active'));
                document.querySelector('[data-section="users-section"]').classList.add('active');
                
                contentSections.forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById('users-section').classList.add('active');
                
                loadUsersTable();
            });
            
            // Filter and search functionality
            statusFilter.addEventListener('change', loadUsersTable);
            typeFilter.addEventListener('change', loadUsersTable);
            userSearch.addEventListener('input', loadUsersTable);
            
            // Add user button
            addUserBtn.addEventListener('click', function() {
                // In a real app, this would open a modal or form to add a new user
                alert('Add User functionality would open a form here');
            });
            
            // Check if user is already logged in
            function checkLoginStatus() {
                const isLoggedIn = sessionStorage.getItem('adminLoggedIn');
                const username = sessionStorage.getItem('adminUsername');

                if (isLoggedIn === 'true' && username) {
                    authContainer.style.display = 'none';
                    dashboard.style.display = 'block';
                    adminName.textContent = username;
                    updateDashboardStats();
                    loadUsersTable();
                    loadRecentUsers();
                }
            }
            

            
            function showMessage(text, type) {
                loginMessage.textContent = text;
                loginMessage.className = 'message ' + type;
                loginMessage.style.display = 'block';
                
                // Auto-hide success messages after 5 seconds
                if (type === 'success') {
                    setTimeout(function() {
                        loginMessage.style.display = 'none';
                    }, 5000);
                }
            }
            
            // Initialize sample data for demonstration
            function initializeSampleData() {
                // Check if sample data already exists
                if (!localStorage.getItem('systemUsers')) {
                    const sampleUsers = [
                        {
                            id: 1,
                            fullName: 'John Doe',
                            email: 'john.doe@example.com',
                            phone: '+1 (555) 123-4567',
                            userType: 'resident',
                            registrationDate: '2023-10-15',
                            status: 'active',
                            vehicle: 'Toyota Camry - ABC123'
                        },
                        {
                            id: 2,
                            fullName: 'Jane Smith',
                            email: 'jane.smith@example.com',
                            phone: '+1 (555) 987-6543',
                            userType: 'staff',
                            registrationDate: '2023-11-02',
                            status: 'active',
                            vehicle: 'Honda Civic - XYZ789'
                        },
                        {
                            id: 3,
                            fullName: 'Robert Johnson',
                            email: 'robert.j@example.com',
                            phone: '+1 (555) 456-7890',
                            userType: 'visitor',
                            registrationDate: '2023-12-10',
                            status: 'pending',
                            vehicle: 'Ford F-150 - DEF456'
                        },
                        {
                            id: 4,
                            fullName: 'Sarah Williams',
                            email: 'sarah.w@example.com',
                            phone: '+1 (555) 234-5678',
                            userType: 'vendor',
                            registrationDate: '2023-09-22',
                            status: 'active',
                            vehicle: 'Nissan Altima - GHI789'
                        },
                        {
                            id: 5,
                            fullName: 'Michael Brown',
                            email: 'michael.b@example.com',
                            phone: '+1 (555) 876-5432',
                            userType: 'resident',
                            registrationDate: '2023-11-30',
                            status: 'inactive',
                            vehicle: 'Chevrolet Malibu - JKL012'
                        }
                    ];
                    
                    localStorage.setItem('systemUsers', JSON.stringify(sampleUsers));
                }
                

            }
            
            // Load users into the management table with loading spinner
            async function loadUsersTable() {
                // Show loading
                usersTable.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Loading users...</td></tr>';

                try {
                    const response = await fetch('http://localhost:50001/api/admin/users');
                    if (!response.ok) {
                        throw new Error('Failed to fetch users');
                    }
                    const data = await response.json();
                    const users = data.users || [];
                    const vehicles = data.vehicles || [];
                    const statusFilterValue = statusFilter.value;
                    const typeFilterValue = typeFilter.value;
                    const searchValue = userSearch.value.toLowerCase();

                    // Transform API data to match expected format
                    let transformedUsers = users.map(user => {
                        // Find associated vehicle
                        const userVehicle = vehicles.find(v => v.userId === user._id);
                        return {
                            id: user._id,
                            fullName: `${user.firstName} ${user.lastName}`,
                            email: user.email,
                            phone: user.contact || 'N/A',
                            vehicle: userVehicle ? userVehicle.licensePlate : 'N/A',
                            userType: user.userType || 'resident', // Use API field if available
                            registrationDate: new Date(user.createdAt).toISOString().split('T')[0],
                            status: user.status || 'active' // Use API field if available
                        };
                    });

                    let filteredUsers = transformedUsers.filter(user => {
                        const matchesStatus = statusFilterValue === 'all' || user.status === statusFilterValue;
                        const matchesType = typeFilterValue === 'all' || user.userType === typeFilterValue;
                        const matchesSearch =
                            user.fullName.toLowerCase().includes(searchValue) ||
                            user.email.toLowerCase().includes(searchValue) ||
                            user.phone.includes(searchValue) ||
                            user.vehicle.toLowerCase().includes(searchValue);

                        return matchesStatus && matchesType && matchesSearch;
                    });

                    usersTable.innerHTML = '';

                    if (filteredUsers.length === 0) {
                        usersTable.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 20px;">No users found</td></tr>';
                        return;
                    }

                    filteredUsers.forEach(user => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${user.id}</td>
                            <td>${user.fullName}</td>
                            <td>${user.email}</td>
                            <td>${user.phone}</td>
                            <td>${user.vehicle}</td>
                            <td>${user.userType.charAt(0).toUpperCase() + user.userType.slice(1)}</td>
                            <td>${user.registrationDate}</td>
                        `;
                        usersTable.appendChild(row);
                    });

                    // Add event listeners to action buttons
                    document.querySelectorAll('.btn-view').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const userId = this.getAttribute('data-id');
                            viewUserDetails(userId);
                        });
                    });

                    document.querySelectorAll('.btn-edit').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const userId = this.getAttribute('data-id');
                            editUser(userId);
                        });
                    });

                    document.querySelectorAll('.btn-delete').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const userId = this.getAttribute('data-id');
                            deleteUser(userId);
                        });
                    });
                } catch (error) {
                    console.error('Error loading users:', error);
                    usersTable.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 20px;">Error loading users</td></tr>';
                }
            }
            
            // Load recent users for the dashboard
            async function loadRecentUsers() {
                try {
                    const response = await fetch('http://localhost:50001/api/admin/users');
                    if (!response.ok) {
                        throw new Error('Failed to fetch users');
                    }
                    const data = await response.json();
                    const users = data.users || [];
                    const vehicles = data.vehicles || [];

                    // Sort by registration date (newest first) and take the first 5
                    const recentUsers = users
                        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                        .slice(0, 5);

                    recentUsersTable.innerHTML = '';

                    recentUsers.forEach(user => {
                        // Find the user's vehicle
                        const userVehicle = vehicles.find(v => v.userId === user._id);
                        const vehicleInfo = userVehicle ?
                            `${userVehicle.make} ${userVehicle.model} - ${userVehicle.licensePlate}` :
                            'No vehicle registered';

                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${user.firstName} ${user.lastName}</td>
                            <td>${user.email}</td>
                            <td>${vehicleInfo}</td>
                            <td>${new Date(user.createdAt).toISOString().split('T')[0]}</td>
                            <td><span class="status active">Active</span></td>
                        `;
                        recentUsersTable.appendChild(row);
                    });
                } catch (error) {
                    console.error('Error loading recent users:', error);
                    recentUsersTable.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px;">Error loading recent users</td></tr>';
                }
            }
            
            // Update dashboard statistics
            async function updateDashboardStats() {
                try {
                    const response = await fetch('http://localhost:50001/api/admin/users');
                    if (!response.ok) {
                        throw new Error('Failed to fetch users');
                    }
                    const data = await response.json();
                    const users = data.users || [];
                    const vehicles = data.vehicles || [];

                    totalUsers.textContent = users.length;
                    totalVehicles.textContent = vehicles.length;
                    todayEntries.textContent = Math.floor(Math.random() * 50) + 20; // Random for demo

                    // Count pending users
                    const pendingCount = users.filter(u => u.status === 'pending').length;
                    pendingApprovals.textContent = pendingCount;
                } catch (error) {
                    console.error('Error updating dashboard stats:', error);
                    totalUsers.textContent = '0';
                    totalVehicles.textContent = '0';
                    todayEntries.textContent = '0';
                    pendingApprovals.textContent = '0';
                }
            }
            
            // User management functions
            async function viewUserDetails(userId) {
                try {
                    const response = await fetch(`http://localhost:50001/api/admin/users/${userId}`);
                    if (!response.ok) {
                        throw new Error('Failed to fetch user details');
                    }
                    const user = await response.json();

                    // Find the user's vehicles
                    const vehicleResponse = await fetch('http://localhost:50001/api/admin/users');
                    const data = await vehicleResponse.json();
                    const vehicles = data.vehicles || [];
                    const userVehicles = vehicles.filter(v => v.userId === userId);

                    // Populate user details
                    document.getElementById('viewName').textContent = `${user.firstName} ${user.lastName}`;
                    document.getElementById('viewEmail').textContent = user.email;
                    document.getElementById('viewPhone').textContent = user.contact || 'N/A';
                    document.getElementById('viewUserType').textContent = user.userType ? user.userType.charAt(0).toUpperCase() + user.userType.slice(1) : 'Resident';
                    document.getElementById('viewStatus').textContent = user.status ? user.status.charAt(0).toUpperCase() + user.status.slice(1) : 'Active';
                    document.getElementById('viewRegDate').textContent = new Date(user.createdAt).toISOString().split('T')[0];

                    // Populate vehicle details
                    const viewVehiclesDiv = document.getElementById('viewVehicles');
                    viewVehiclesDiv.innerHTML = '';

                    if (userVehicles.length > 0) {
                        userVehicles.forEach(vehicle => {
                            const vehicleDiv = document.createElement('div');
                            vehicleDiv.innerHTML = `
                                <p><strong>Make:</strong> ${vehicle.make}</p>
                                <p><strong>Model:</strong> ${vehicle.model}</p>
                                <p><strong>License Plate:</strong> ${vehicle.licensePlate}</p>
                                <p><strong>Color:</strong> ${vehicle.color || 'N/A'}</p>
                                <hr>
                            `;
                            viewVehiclesDiv.appendChild(vehicleDiv);
                        });
                    } else {
                        viewVehiclesDiv.innerHTML = '<p>No vehicles registered</p>';
                    }

                    // Show modal
                    viewModal.style.display = 'block';
                } catch (error) {
                    console.error('Error fetching user details:', error);
                    alert('Error loading user details. Please try again.');
                }
            }
            
            async function editUser(userId) {
                try {
                    const response = await fetch(`http://localhost:50001/api/admin/users/${userId}`);
                    if (!response.ok) {
                        throw new Error('Failed to fetch user details');
                    }
                    const user = await response.json();

                    // Populate form fields
                    document.getElementById('editFirstName').value = user.firstName;
                    document.getElementById('editLastName').value = user.lastName;
                    document.getElementById('editEmail').value = user.email;
                    document.getElementById('editContact').value = user.contact || '';

                    // Set userId on form
                    editUserForm.dataset.userId = userId;

                    // Show modal
                    editModal.style.display = 'block';
                } catch (error) {
                    console.error('Error loading user for editing:', error);
                    alert('Error loading user details for editing. Please try again.');
                }
            }
            
            async function deleteUser(userId) {
                if (confirm('Are you sure you want to delete this user? This action cannot be undone.')) {
                    try {
                        const response = await fetch(`http://localhost:50001/api/admin/users/${userId}`, {
                            method: 'DELETE',
                        });

                        if (response.ok) {
                            alert('User deleted successfully!');
                            loadUsersTable();
                            loadRecentUsers();
                            updateDashboardStats();
                        } else {
                            const errorData = await response.json();
                            alert('Error deleting user: ' + (errorData.message || 'Unknown error'));
                        }
                    } catch (error) {
                        console.error('Error deleting user:', error);
                        alert('Error deleting user. Please try again.');
                    }
                }
            }
            
            // Access control elements
            const openGateBtn = document.getElementById('openGateBtn');
            const closeGateBtn = document.getElementById('closeGateBtn');
            const emergencyStopBtn = document.getElementById('emergencyStopBtn');
            const updatePermissionsBtn = document.getElementById('updatePermissionsBtn');
            const updateTimeRulesBtn = document.getElementById('updateTimeRulesBtn');
            const activateEmergencyBtn = document.getElementById('activateEmergencyBtn');
            const viewAllLogsBtn = document.getElementById('viewAllLogsBtn');
            const accessLogsTable = document.getElementById('accessLogsTable');

            // Vehicle management event listeners
            addVehicleBtn.addEventListener('click', function() {
                // In a real app, this would open a modal to add a new vehicle
                alert('Add Vehicle functionality would open a form here');
            });

            vehicleStatusFilter.addEventListener('change', loadVehiclesTable);
            vehicleMakeFilter.addEventListener('change', loadVehiclesTable);
            vehicleSearch.addEventListener('input', loadVehiclesTable);

            // Load vehicles table when navigating to vehicles section
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();

                    // Update active nav link
                    navLinks.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');

                    // Show corresponding section
                    const sectionId = this.getAttribute('data-section');
                    contentSections.forEach(section => {
                        section.classList.remove('active');
                    });
                    document.getElementById(sectionId).classList.add('active');

                    // If navigating to users section, refresh the table
                    if (sectionId === 'users-section') {
                        loadUsersTable();
                    }
                    // If navigating to vehicles section, refresh the table
                    if (sectionId === 'vehicles-section') {
                        loadVehiclesTable();
                    }
                });
            });

            // Load vehicles into the management table
            async function loadVehiclesTable() {
                // Show loading
                vehiclesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Loading vehicles...</td></tr>';

                try {
                    const response = await fetch('http://localhost:50001/api/admin/users');
                    if (!response.ok) {
                        throw new Error('Failed to fetch vehicles');
                    }
                    const data = await response.json();
                    const vehicles = data.vehicles || [];
                    const users = data.users || [];
                    const statusFilterValue = vehicleStatusFilter.value;
                    const makeFilterValue = vehicleMakeFilter.value;
                    const searchValue = vehicleSearch.value.toLowerCase();

                    // Transform API data to match expected format
                    let transformedVehicles = vehicles.map(vehicle => {
                        // Find associated user
                        const vehicleUser = users.find(u => u._id === vehicle.userId);
                        return {
                            id: vehicle._id,
                            licensePlate: vehicle.licensePlate,
                            make: vehicle.make,
                            model: vehicle.model,
                            year: vehicle.year || 'N/A',
                            color: vehicle.color || 'N/A',
                            owner: vehicleUser ? `${vehicleUser.firstName} ${vehicleUser.lastName}` : 'Unknown',
                            status: vehicle.status || 'active'
                        };
                    });

                    let filteredVehicles = transformedVehicles.filter(vehicle => {
                        const matchesStatus = statusFilterValue === 'all' || vehicle.status === statusFilterValue;
                        const matchesMake = makeFilterValue === 'all' || vehicle.make === makeFilterValue;
                        const matchesSearch =
                            vehicle.licensePlate.toLowerCase().includes(searchValue) ||
                            vehicle.make.toLowerCase().includes(searchValue) ||
                            vehicle.model.toLowerCase().includes(searchValue) ||
                            vehicle.owner.toLowerCase().includes(searchValue);

                        return matchesStatus && matchesMake && matchesSearch;
                    });

                    vehiclesTable.innerHTML = '';

                    if (filteredVehicles.length === 0) {
                        vehiclesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 20px;">No vehicles found</td></tr>';
                        return;
                    }

                    filteredVehicles.forEach(vehicle => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${vehicle.licensePlate}</td>
                            <td>${vehicle.make}</td>
                            <td>${vehicle.model}</td>
                            <td>${vehicle.year}</td>
                            <td>${vehicle.color}</td>
                            <td>${vehicle.owner}</td>
                            <td><span class="status ${vehicle.status}">${vehicle.status.charAt(0).toUpperCase() + vehicle.status.slice(1)}</span></td>
                            <td class="action-buttons">
                                <button class="btn-action btn-view" data-id="${vehicle.id}"><i class="fas fa-eye"></i></button>
                                <button class="btn-action btn-edit" data-id="${vehicle.id}"><i class="fas fa-edit"></i></button>
                                <button class="btn-action btn-delete" data-id="${vehicle.id}"><i class="fas fa-trash"></i></button>
                            </td>
                        `;
                        vehiclesTable.appendChild(row);
                    });

                    // Add event listeners to action buttons
                    document.querySelectorAll('#vehiclesTable .btn-view').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const vehicleId = this.getAttribute('data-id');
                            viewVehicleDetails(vehicleId);
                        });
                    });

                    document.querySelectorAll('#vehiclesTable .btn-edit').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const vehicleId = this.getAttribute('data-id');
                            editVehicle(vehicleId);
                        });
                    });

                    document.querySelectorAll('#vehiclesTable .btn-delete').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const vehicleId = this.getAttribute('data-id');
                            deleteVehicle(vehicleId);
                        });
                    });
                } catch (error) {
                    console.error('Error loading vehicles:', error);
                    vehiclesTable.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 20px;">Error loading vehicles</td></tr>';
                }
            }

            // Vehicle management functions
            async function viewVehicleDetails(vehicleId) {
                try {
                    const response = await fetch('http://localhost:50001/api/admin/users');
                    const data = await response.json();
                    const vehicles = data.vehicles || [];
                    const users = data.users || [];
                    const vehicle = vehicles.find(v => v._id === vehicleId);
                    const vehicleUser = users.find(u => u._id === vehicle.userId);

                    if (!vehicle) {
                        alert('Vehicle not found');
                        return;
                    }

                    // Populate vehicle details in view modal
                    document.getElementById('viewName').textContent = vehicleUser ? `${vehicleUser.firstName} ${vehicleUser.lastName}` : 'Unknown Owner';
                    document.getElementById('viewEmail').textContent = vehicleUser ? vehicleUser.email : 'N/A';
                    document.getElementById('viewPhone').textContent = vehicle.licensePlate;
                    document.getElementById('viewUserType').textContent = vehicle.make;
                    document.getElementById('viewStatus').textContent = vehicle.status ? vehicle.status.charAt(0).toUpperCase() + vehicle.status.slice(1) : 'Active';
                    document.getElementById('viewRegDate').textContent = vehicle.year || 'N/A';

                    // Populate vehicle details
                    const viewVehiclesDiv = document.getElementById('viewVehicles');
                    viewVehiclesDiv.innerHTML = `
                        <p><strong>Model:</strong> ${vehicle.model}</p>
                        <p><strong>Year:</strong> ${vehicle.year || 'N/A'}</p>
                        <p><strong>Color:</strong> ${vehicle.color || 'N/A'}</p>
                        <p><strong>License Plate:</strong> ${vehicle.licensePlate}</p>
                    `;

                    // Show modal
                    viewModal.style.display = 'block';
                } catch (error) {
                    console.error('Error fetching vehicle details:', error);
                    alert('Error loading vehicle details. Please try again.');
                }
            }

            async function editVehicle(vehicleId) {
                // In a real app, this would open an edit modal for the vehicle
                alert('Edit Vehicle functionality would open a form here');
            }

            async function deleteVehicle(vehicleId) {
                if (confirm('Are you sure you want to delete this vehicle? This action cannot be undone.')) {
                    try {
                        // Note: This would need a proper API endpoint for deleting vehicles
                        alert('Vehicle deletion would be implemented with proper API endpoint');
                    } catch (error) {
                        console.error('Error deleting vehicle:', error);
                        alert('Error deleting vehicle. Please try again.');
                    }
                }
            }

            // Access control functions
            function controlGate(action) {
                // In a real app, this would send a request to the gate control API
                const gateStatus = document.getElementById('gateStatus');
                if (action === 'open') {
                    gateStatus.textContent = 'Open';
                    gateStatus.className = 'status active';
                    alert('Gate opened successfully');
                } else if (action === 'close') {
                    gateStatus.textContent = 'Closed';
                    gateStatus.className = 'status inactive';
                    alert('Gate closed successfully');
                } else if (action === 'emergency') {
                    gateStatus.textContent = 'Emergency Stop';
                    gateStatus.className = 'status';
                    alert('Emergency stop activated');
                }
            }

            function updatePermissions() {
                const permissions = {
                    resident: document.getElementById('residentAccess').checked,
                    visitor: document.getElementById('visitorAccess').checked,
                    staff: document.getElementById('staffAccess').checked,
                    vendor: document.getElementById('vendorAccess').checked
                };

                // In a real app, this would send the permissions to the server
                console.log('Updating permissions:', permissions);
                alert('Permissions updated successfully');
            }

            function updateTimeRules() {
                const timeRules = {
                    weekdayStart: document.getElementById('weekdayStart').value,
                    weekdayEnd: document.getElementById('weekdayEnd').value,
                    weekendStart: document.getElementById('weekendStart').value,
                    weekendEnd: document.getElementById('weekendEnd').value,
                    holidayOverride: document.getElementById('holidayOverride').checked
                };

                // In a real app, this would send the time rules to the server
                console.log('Updating time rules:', timeRules);
                alert('Time rules updated successfully');
            }

            function activateEmergencyMode() {
                const emergencyCode = document.getElementById('emergencyCode').value;
                if (!emergencyCode) {
                    alert('Please enter the emergency code');
                    return;
                }

                // In a real app, this would verify the emergency code and activate emergency mode
                console.log('Activating emergency mode with code:', emergencyCode);
                alert('Emergency mode activated successfully');
            }

            function loadAccessLogs() {
                // In a real app, this would fetch access logs from the server
                const sampleLogs = [
                    { time: '2023-12-15 08:30:00', user: 'John Doe', vehicle: 'Toyota Camry', accessType: 'Entry', status: 'Granted' },
                    { time: '2023-12-15 09:15:00', user: 'Jane Smith', vehicle: 'Honda Civic', accessType: 'Entry', status: 'Granted' },
                    { time: '2023-12-15 10:45:00', user: 'Robert Johnson', vehicle: 'Ford F-150', accessType: 'Entry', status: 'Denied' },
                    { time: '2023-12-15 11:20:00', user: 'Sarah Williams', vehicle: 'Nissan Altima', accessType: 'Exit', status: 'Granted' },
                    { time: '2023-12-15 14:10:00', user: 'Michael Brown', vehicle: 'Chevrolet Malibu', accessType: 'Entry', status: 'Granted' }
                ];

                accessLogsTable.innerHTML = '';
                sampleLogs.forEach(log => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${log.time}</td>
                        <td>${log.user}</td>
                        <td>${log.vehicle}</td>
                        <td>${log.accessType}</td>
                        <td><span class="status ${log.status.toLowerCase()}">${log.status}</span></td>
                    `;
                    accessLogsTable.appendChild(row);
                });
            }

            // Access control event listeners
            openGateBtn.addEventListener('click', () => controlGate('open'));
            closeGateBtn.addEventListener('click', () => controlGate('close'));
            emergencyStopBtn.addEventListener('click', () => controlGate('emergency'));
            updatePermissionsBtn.addEventListener('click', updatePermissions);
            updateTimeRulesBtn.addEventListener('click', updateTimeRules);
            activateEmergencyBtn.addEventListener('click', activateEmergencyMode);
            viewAllLogsBtn.addEventListener('click', loadAccessLogs);

            // Load access logs when navigating to access section
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();

                    // Update active nav link
                    navLinks.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');

                    // Show corresponding section
                    const sectionId = this.getAttribute('data-section');
                    contentSections.forEach(section => {
                        section.classList.remove('active');
                    });
                    document.getElementById(sectionId).classList.add('active');

                    // If navigating to users section, refresh the table
                    if (sectionId === 'users-section') {
                        loadUsersTable();
                    }
                    // If navigating to vehicles section, refresh the table
                    if (sectionId === 'vehicles-section') {
                        loadVehiclesTable();
                    }
                    // If navigating to access section, load access logs
                    if (sectionId === 'access-section') {
                        loadAccessLogs();
                    }
                    // If navigating to reports section, load reports
                    if (sectionId === 'reports-section') {
                        loadReportsSection();
                    }
                    // If navigating to settings section, load settings
                    if (sectionId === 'settings-section') {
                        loadSettingsSection();
                    }
                });
            });

            // Reports & Analytics functions
            function loadReportsSection() {
                // Populate stats
                document.getElementById('totalEntries').textContent = '1247';
                document.getElementById('avgEntryTime').textContent = '2.3';
                document.getElementById('deniedEntries').textContent = '23';
                document.getElementById('activeUsers').textContent = '89';

                // Create charts
                createEntryTrendsChart();
                createUserTypeChart();
                createPeakHoursChart();
                createAccessStatusChart();

                // Load reports table
                loadReportsTable();
            }

            function createEntryTrendsChart() {
                const ctx = document.getElementById('entryTrendsChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Entries',
                            data: [45, 52, 48, 61, 55, 38, 42],
                            borderColor: 'rgb(52, 152, 219)',
                            tension: 0.1
                        }]
                    }
                });
            }

            function createUserTypeChart() {
                const ctx = document.getElementById('userTypeChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Resident', 'Visitor', 'Staff', 'Vendor'],
                        datasets: [{
                            data: [45, 25, 20, 10],
                            backgroundColor: [
                                'rgb(52, 152, 219)',
                                'rgb(46, 204, 113)',
                                'rgb(155, 89, 182)',
                                'rgb(230, 126, 34)'
                            ]
                        }]
                    }
                });
            }

            function createPeakHoursChart() {
                const ctx = document.getElementById('peakHoursChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['6AM', '8AM', '10AM', '12PM', '2PM', '4PM', '6PM', '8PM'],
                        datasets: [{
                            label: 'Entries',
                            data: [12, 45, 32, 28, 35, 42, 38, 15],
                            backgroundColor: 'rgb(52, 152, 219)'
                        }]
                    }
                });
            }

            function createAccessStatusChart() {
                const ctx = document.getElementById('accessStatusChart').getContext('2d');
                new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['Granted', 'Denied', 'Pending'],
                        datasets: [{
                            data: [85, 10, 5],
                            backgroundColor: [
                                'rgb(46, 204, 113)',
                                'rgb(231, 76, 60)',
                                'rgb(241, 196, 15)'
                            ]
                        }]
                    }
                });
            }

            function loadReportsTable() {
                const reportsTable = document.getElementById('reportsTable');
                const sampleReports = [
                    { date: '2023-12-15 08:30:00', user: 'John Doe', vehicle: 'Toyota Camry', type: 'Entry', status: 'Granted', duration: '2 min' },
                    { date: '2023-12-15 09:15:00', user: 'Jane Smith', vehicle: 'Honda Civic', type: 'Entry', status: 'Granted', duration: '1.5 min' },
                    { date: '2023-12-15 10:45:00', user: 'Robert Johnson', vehicle: 'Ford F-150', type: 'Entry', status: 'Denied', duration: '-' },
                    { date: '2023-12-15 11:20:00', user: 'Sarah Williams', vehicle: 'Nissan Altima', type: 'Exit', status: 'Granted', duration: '3 min' },
                    { date: '2023-12-15 14:10:00', user: 'Michael Brown', vehicle: 'Chevrolet Malibu', type: 'Entry', status: 'Granted', duration: '2.2 min' }
                ];

                reportsTable.innerHTML = '';
                sampleReports.forEach(report => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${report.date}</td>
                        <td>${report.user}</td>
                        <td>${report.vehicle}</td>
                        <td>${report.type}</td>
                        <td><span class="status ${report.status.toLowerCase()}">${report.status}</span></td>
                        <td>${report.duration}</td>
                    `;
                    reportsTable.appendChild(row);
                });
            }

            // Settings functions
            function loadSettingsSection() {
                // Load settings from localStorage
                loadSettingsFromStorage();
                // Add tab switching
                setupSettingsTabs();
                // Add save functionality
                setupSettingsSave();
            }

            function loadSettingsFromStorage() {
                // Load general settings
                document.getElementById('systemName').value = localStorage.getItem('systemName') || 'Smart Vehicle Entry System';
                document.getElementById('timezone').value = localStorage.getItem('timezone') || 'UTC';
                document.getElementById('sessionTimeout').value = localStorage.getItem('sessionTimeout') || '30';
                document.getElementById('maxLoginAttempts').value = localStorage.getItem('maxLoginAttempts') || '5';
                document.getElementById('maintenanceMode').checked = localStorage.getItem('maintenanceMode') === 'true';

                // Load notifications
                document.getElementById('emailNotifications').checked = localStorage.getItem('emailNotifications') !== 'false';
                document.getElementById('smsNotifications').checked = localStorage.getItem('smsNotifications') === 'true';
                document.getElementById('pushNotifications').checked = localStorage.getItem('pushNotifications') !== 'false';
                document.getElementById('notificationEmail').value = localStorage.getItem('notificationEmail') || 'admin@vehicleentry.com';
                document.getElementById('notificationPhone').value = localStorage.getItem('notificationPhone') || '';

                // Load security
                document.getElementById('twoFactorAuth').checked = localStorage.getItem('twoFactorAuth') === 'true';
                document.getElementById('passwordPolicy').value = localStorage.getItem('passwordPolicy') || 'basic';
                document.getElementById('auditLogs').checked = localStorage.getItem('auditLogs') !== 'false';
                document.getElementById('ipWhitelist').checked = localStorage.getItem('ipWhitelist') === 'true';
                document.getElementById('encryptionLevel').value = localStorage.getItem('encryptionLevel') || 'standard';

                // Load backup
                document.getElementById('autoBackup').checked = localStorage.getItem('autoBackup') !== 'false';
                document.getElementById('backupTime').value = localStorage.getItem('backupTime') || '02:00';
                document.getElementById('backupRetention').value = localStorage.getItem('backupRetention') || '30';
                document.getElementById('backupLocation').value = localStorage.getItem('backupLocation') || '/backups';

                // Load system
                document.getElementById('webhookUrl').value = localStorage.getItem('webhookUrl') || '';
                document.getElementById('integrationEnabled').checked = localStorage.getItem('integrationEnabled') === 'true';
                document.getElementById('logLevel').value = localStorage.getItem('logLevel') || 'info';
            }

            function setupSettingsTabs() {
                const tabButtons = document.querySelectorAll('.tab-btn');
                const tabPanes = document.querySelectorAll('.tab-pane');

                tabButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        // Remove active class from all buttons and panes
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        tabPanes.forEach(pane => pane.classList.remove('active'));

                        // Add active class to clicked button and corresponding pane
                        this.classList.add('active');
                        const tabId = this.getAttribute('data-tab');
                        document.getElementById(tabId + '-tab').classList.add('active');
                    });
                });
            }

            function setupSettingsSave() {
                const saveBtn = document.getElementById('saveSettingsBtn');
                saveBtn.addEventListener('click', function() {
                    // Validate forms
                    if (validateSettings()) {
                        // Save to localStorage
                        saveSettingsToStorage();
                        alert('Settings saved successfully!');
                    }
                });
            }

            function validateSettings() {
                // Basic validation
                const email = document.getElementById('notificationEmail').value;
                if (email && !email.includes('@')) {
                    alert('Please enter a valid email address');
                    return false;
                }

                const sessionTimeout = parseInt(document.getElementById('sessionTimeout').value);
                if (sessionTimeout < 5 || sessionTimeout > 120) {
                    alert('Session timeout must be between 5 and 120 minutes');
                    return false;
                }

                const maxAttempts = parseInt(document.getElementById('maxLoginAttempts').value);
                if (maxAttempts < 3 || maxAttempts > 10) {
                    alert('Max login attempts must be between 3 and 10');
                    return false;
                }

                return true;
            }

            function saveSettingsToStorage() {
                // Save general
                localStorage.setItem('systemName', document.getElementById('systemName').value);
                localStorage.setItem('timezone', document.getElementById('timezone').value);
                localStorage.setItem('sessionTimeout', document.getElementById('sessionTimeout').value);
                localStorage.setItem('maxLoginAttempts', document.getElementById('maxLoginAttempts').value);
                localStorage.setItem('maintenanceMode', document.getElementById('maintenanceMode').checked);

                // Save notifications
                localStorage.setItem('emailNotifications', document.getElementById('emailNotifications').checked);
                localStorage.setItem('smsNotifications', document.getElementById('smsNotifications').checked);
                localStorage.setItem('pushNotifications', document.getElementById('pushNotifications').checked);
                localStorage.setItem('notificationEmail', document.getElementById('notificationEmail').value);
                localStorage.setItem('notificationPhone', document.getElementById('notificationPhone').value);

                // Save security
                localStorage.setItem('twoFactorAuth', document.getElementById('twoFactorAuth').checked);
                localStorage.setItem('passwordPolicy', document.getElementById('passwordPolicy').value);
                localStorage.setItem('auditLogs', document.getElementById('auditLogs').checked);
                localStorage.setItem('ipWhitelist', document.getElementById('ipWhitelist').checked);
                localStorage.setItem('encryptionLevel', document.getElementById('encryptionLevel').value);

                // Save backup
                localStorage.setItem('autoBackup', document.getElementById('autoBackup').checked);
                localStorage.setItem('backupTime', document.getElementById('backupTime').value);
                localStorage.setItem('backupRetention', document.getElementById('backupRetention').value);
                localStorage.setItem('backupLocation', document.getElementById('backupLocation').value);

                // Save system
                localStorage.setItem('webhookUrl', document.getElementById('webhookUrl').value);
                localStorage.setItem('integrationEnabled', document.getElementById('integrationEnabled').checked);
                localStorage.setItem('logLevel', document.getElementById('logLevel').value);
            }

            // Export functions
            function setupExportButtons() {
                document.getElementById('exportCSVBtn').addEventListener('click', exportToCSV);
                document.getElementById('exportPDFBtn').addEventListener('click', exportToPDF);
            }

            function exportToCSV() {
                const reports = [
                    ['Date/Time', 'User', 'Vehicle', 'Type', 'Status', 'Duration'],
                    ['2023-12-15 08:30:00', 'John Doe', 'Toyota Camry', 'Entry', 'Granted', '2 min'],
                    ['2023-12-15 09:15:00', 'Jane Smith', 'Honda Civic', 'Entry', 'Granted', '1.5 min'],
                    ['2023-12-15 10:45:00', 'Robert Johnson', 'Ford F-150', 'Entry', 'Denied', '-'],
                    ['2023-12-15 11:20:00', 'Sarah Williams', 'Nissan Altima', 'Exit', 'Granted', '3 min'],
                    ['2023-12-15 14:10:00', 'Michael Brown', 'Chevrolet Malibu', 'Entry', 'Granted', '2.2 min']
                ];

                const csvContent = reports.map(row => row.join(',')).join('\n');
                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'reports.csv';
                a.click();
                window.URL.revokeObjectURL(url);
            }

            function exportToPDF() {
                alert('PDF export functionality would require a library like jsPDF. For now, this is a placeholder.');
            }

            // Additional event listeners
            document.getElementById('generateReportBtn').addEventListener('click', function() {
                const startDate = document.getElementById('reportStartDate').value;
                const endDate = document.getElementById('reportEndDate').value;
                if (!startDate || !endDate) {
                    alert('Please select date range');
                    return;
                }
                // Generate report based on dates
                loadReportsSection(); // Reload with filtered data
            });

            document.getElementById('manualBackupBtn').addEventListener('click', function() {
                alert('Manual backup initiated. This would trigger a backup process.');
            });

            document.getElementById('regenerateApiKey').addEventListener('click', function() {
                const newKey = 'sk-' + Math.random().toString(36).substr(2, 16);
                document.getElementById('apiKey').value = newKey;
                localStorage.setItem('apiKey', newKey);
            });

            // Setup export buttons
            setupExportButtons();

            // Initialize the application
            checkLoginStatus();
        });
    </script>
</body>
</html>                   

